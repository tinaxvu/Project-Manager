{% block content %}
<h2>Files for {{ project.name }}</h2>

<form method="POST" action="{% url 'projects:project_files' project.id %}" enctype="multipart/form-data">
    {% csrf_token %}
    <label for="file">Select file:</label>
    <input type="file" name="file" id="file" required>
    <button type="submit">Upload</button>
</form>

<h3>Uploaded Files</h3>
<ul>
  {% for file, url in files.items %}
    <li>
      <a href="{{ url }}">{{ file.file.name }}</a> - Uploaded by {{ file.uploaded_by }}

      {% if user.permission_level == 'admin' %}
        <form method="POST" action="{% url 'projects:delete-file' project.id file.id %}" style="display:inline;">
          {% csrf_token %}
          <button type="submit" onclick="return confirm('Are you sure you want to delete this file?');">Delete</button>
        </form>
      {% endif %}
    </li>
  {% empty %}
    <li>No files uploaded yet.</li>
  {% endfor %}
</ul>
{% endblock %}
